<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>用 TOTP 擺脫簡訊驗證碼：安全好用的兩步驟驗證 | WANcatServer</title><meta name=keywords content="資訊安全"><meta name=description content="兩步驟驗證 隨著數位身份在生活中的影響力愈來愈大，只靠著一組密碼來保護我們的帳戶已經不夠安全，而且記密碼實在是違反人腦天性的行為，因此大部分人總是使用重複的、好記的脆弱密碼。要解決這個問題，除了使用密碼管理工具來幫你記密碼，還可以透過設定兩步驟驗證（2FA：Two-Factor Authentication），大大提昇帳戶的安全性。
兩步驟驗證就是在密碼之外，多用一個資訊來驗證你是本人，主流的作法有像 Email、簡訊驗證信，但用過的人可能都會覺得登入時要開信箱收信很麻煩，信箱也會被這些信件給弄亂，更別提當人在國外時，簡訊收不到害你無法登入。
今天要介紹的 TOTP: Time-based One-Time Password algorithm，就是一種公開的標準，讓你透過手機上的 APP 產生一組 6 位數的一次性驗證碼進行登入，而且在沒有網路的情況下還能使用！
TOTP 如何運作？ TOTP 的概念，就是網站與你事先約定好一組金鑰，並以當下的時間作為參數，運算出一個雜湊值，並取最後 6 位數作為一次性密碼。
然而如果網站和使用者的時間不同的話，就無法計算出相同的結果，因此通常會以 30 秒作為一個單位，來避免使用者與網站的時間差。網站為了良好的使用者體驗，通常也會允許前一次的一次性密碼。
TOTP 的優點 TOTP 它是一個公開標準，你不需要依賴單一企業或組織，各種客戶端都能相容；它的安全性基於密碼學，而非第三方機構的信用；它是去中心化驗證，整個驗證流程只有要驗證身份的雙方而已。
Google 可以讀你的 Gmail，簡訊也可以被政府或通訊業者攔截，然而 TOTP 不需要依賴中介機構，甚至在離線的情況下也仍然可用。
同時對於服務提供者而言，TOTP 也很容易實做，不需要花錢去發簡訊或是寄 Email 被當成垃圾郵件，也不需要跟第三方機構申請，是個省錢又安全的好方法。
開始使用 TOTP 儘管目前懂得使用 TOTP 的使用者並不多，但其實已經有相當多網站支持以 TOTP 作為驗證方式，例如 Google、Facebook、Apple、Amazon、GitHub、PayPal 等，我管理伺服器需要用到的 CloudFlare、Linode、Porkbun 也都有設定 TOTP 來提高安全性。
開始使用的第一步是下載一個 TOTP 的應用程式，有非常多的選項，我自己使用的是 Authy，界面簡單易用，提供加密的雲端備份，此外還有 Google Authenticator、Microsoft Authenticator，自由軟體則有 Red Hat 開發的 FreeOTP，先前在密碼管理工具提到的 Bitwarden 的付費版也有提供 TOTP 的功能。
安裝好驗證器後，到你要登入的網站或 APP 的帳號設定中，啟動兩步驟驗證，在不同網站中，可能會以「驗證應用程式」、「谷歌驗證器」、「代碼產生器」等名稱出現，但背後都是 TOTP 這套標準，流程也很簡單，網站會將金鑰以 QR Code 的方式顯示，打開手機上的驗證器程式掃描就可以加入帳號，並輸入產生的一次性密碼供網站確認，就可以完成綁定。網站若是在手機上，則可以用「複製金鑰」的方式來手動輸入金鑰。"><meta name=author content="wancat"><link rel=canonical href=https://www.wancat.cc/post/totp/><link href=/assets/css/stylesheet.min.0e4a1b49e740c28140e9ee4945aab2f86cb0a7bfbf5a5d612d0cb5df7d6141f4.css integrity="sha256-DkobSedAwoFA6e5JRaqy+Gywp7+/Wl1hLQy1331hQfQ=" rel="preload stylesheet" as=style><link rel=icon href=https://www.wancat.cc/img/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.wancat.cc/img/logo.png><link rel=icon type=image/png sizes=32x32 href=https://www.wancat.cc/img/logo.png><link rel=apple-touch-icon href=https://www.wancat.cc/img/logo.png><link rel=mask-icon href=https://www.wancat.cc/img/logo.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.74.3"><script type=text/javascript>var _paq=window._paq=window._paq||[];_paq.push(['trackPageView']);_paq.push(['enableLinkTracking']);(function(){var u="//matomo.linchpins.cloud/";_paq.push(['setTrackerUrl',u+'matomo.php']);_paq.push(['setSiteId','3']);var d=document,g=d.createElement('script'),s=d.getElementsByTagName('script')[0];g.type='text/javascript';g.async=true;g.src=u+'matomo.js';s.parentNode.insertBefore(g,s);})();</script><meta property="og:title" content="用 TOTP 擺脫簡訊驗證碼：安全好用的兩步驟驗證"><meta property="og:description" content="兩步驟驗證 隨著數位身份在生活中的影響力愈來愈大，只靠著一組密碼來保護我們的帳戶已經不夠安全，而且記密碼實在是違反人腦天性的行為，因此大部分人總是使用重複的、好記的脆弱密碼。要解決這個問題，除了使用密碼管理工具來幫你記密碼，還可以透過設定兩步驟驗證（2FA：Two-Factor Authentication），大大提昇帳戶的安全性。
兩步驟驗證就是在密碼之外，多用一個資訊來驗證你是本人，主流的作法有像 Email、簡訊驗證信，但用過的人可能都會覺得登入時要開信箱收信很麻煩，信箱也會被這些信件給弄亂，更別提當人在國外時，簡訊收不到害你無法登入。
今天要介紹的 TOTP: Time-based One-Time Password algorithm，就是一種公開的標準，讓你透過手機上的 APP 產生一組 6 位數的一次性驗證碼進行登入，而且在沒有網路的情況下還能使用！
TOTP 如何運作？ TOTP 的概念，就是網站與你事先約定好一組金鑰，並以當下的時間作為參數，運算出一個雜湊值，並取最後 6 位數作為一次性密碼。
然而如果網站和使用者的時間不同的話，就無法計算出相同的結果，因此通常會以 30 秒作為一個單位，來避免使用者與網站的時間差。網站為了良好的使用者體驗，通常也會允許前一次的一次性密碼。
TOTP 的優點 TOTP 它是一個公開標準，你不需要依賴單一企業或組織，各種客戶端都能相容；它的安全性基於密碼學，而非第三方機構的信用；它是去中心化驗證，整個驗證流程只有要驗證身份的雙方而已。
Google 可以讀你的 Gmail，簡訊也可以被政府或通訊業者攔截，然而 TOTP 不需要依賴中介機構，甚至在離線的情況下也仍然可用。
同時對於服務提供者而言，TOTP 也很容易實做，不需要花錢去發簡訊或是寄 Email 被當成垃圾郵件，也不需要跟第三方機構申請，是個省錢又安全的好方法。
開始使用 TOTP 儘管目前懂得使用 TOTP 的使用者並不多，但其實已經有相當多網站支持以 TOTP 作為驗證方式，例如 Google、Facebook、Apple、Amazon、GitHub、PayPal 等，我管理伺服器需要用到的 CloudFlare、Linode、Porkbun 也都有設定 TOTP 來提高安全性。
開始使用的第一步是下載一個 TOTP 的應用程式，有非常多的選項，我自己使用的是 Authy，界面簡單易用，提供加密的雲端備份，此外還有 Google Authenticator、Microsoft Authenticator，自由軟體則有 Red Hat 開發的 FreeOTP，先前在密碼管理工具提到的 Bitwarden 的付費版也有提供 TOTP 的功能。
安裝好驗證器後，到你要登入的網站或 APP 的帳號設定中，啟動兩步驟驗證，在不同網站中，可能會以「驗證應用程式」、「谷歌驗證器」、「代碼產生器」等名稱出現，但背後都是 TOTP 這套標準，流程也很簡單，網站會將金鑰以 QR Code 的方式顯示，打開手機上的驗證器程式掃描就可以加入帳號，並輸入產生的一次性密碼供網站確認，就可以完成綁定。網站若是在手機上，則可以用「複製金鑰」的方式來手動輸入金鑰。"><meta property="og:type" content="article"><meta property="og:url" content="https://www.wancat.cc/post/totp/"><meta property="og:image" content="https://www.wancat.cc/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:published_time" content="2020-02-07T19:22:30+08:00"><meta property="article:modified_time" content="2020-02-07T19:22:30+08:00"><meta property="og:site_name" content="WANcatServer"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.wancat.cc/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="用 TOTP 擺脫簡訊驗證碼：安全好用的兩步驟驗證"><meta name=twitter:description content="兩步驟驗證 隨著數位身份在生活中的影響力愈來愈大，只靠著一組密碼來保護我們的帳戶已經不夠安全，而且記密碼實在是違反人腦天性的行為，因此大部分人總是使用重複的、好記的脆弱密碼。要解決這個問題，除了使用密碼管理工具來幫你記密碼，還可以透過設定兩步驟驗證（2FA：Two-Factor Authentication），大大提昇帳戶的安全性。
兩步驟驗證就是在密碼之外，多用一個資訊來驗證你是本人，主流的作法有像 Email、簡訊驗證信，但用過的人可能都會覺得登入時要開信箱收信很麻煩，信箱也會被這些信件給弄亂，更別提當人在國外時，簡訊收不到害你無法登入。
今天要介紹的 TOTP: Time-based One-Time Password algorithm，就是一種公開的標準，讓你透過手機上的 APP 產生一組 6 位數的一次性驗證碼進行登入，而且在沒有網路的情況下還能使用！
TOTP 如何運作？ TOTP 的概念，就是網站與你事先約定好一組金鑰，並以當下的時間作為參數，運算出一個雜湊值，並取最後 6 位數作為一次性密碼。
然而如果網站和使用者的時間不同的話，就無法計算出相同的結果，因此通常會以 30 秒作為一個單位，來避免使用者與網站的時間差。網站為了良好的使用者體驗，通常也會允許前一次的一次性密碼。
TOTP 的優點 TOTP 它是一個公開標準，你不需要依賴單一企業或組織，各種客戶端都能相容；它的安全性基於密碼學，而非第三方機構的信用；它是去中心化驗證，整個驗證流程只有要驗證身份的雙方而已。
Google 可以讀你的 Gmail，簡訊也可以被政府或通訊業者攔截，然而 TOTP 不需要依賴中介機構，甚至在離線的情況下也仍然可用。
同時對於服務提供者而言，TOTP 也很容易實做，不需要花錢去發簡訊或是寄 Email 被當成垃圾郵件，也不需要跟第三方機構申請，是個省錢又安全的好方法。
開始使用 TOTP 儘管目前懂得使用 TOTP 的使用者並不多，但其實已經有相當多網站支持以 TOTP 作為驗證方式，例如 Google、Facebook、Apple、Amazon、GitHub、PayPal 等，我管理伺服器需要用到的 CloudFlare、Linode、Porkbun 也都有設定 TOTP 來提高安全性。
開始使用的第一步是下載一個 TOTP 的應用程式，有非常多的選項，我自己使用的是 Authy，界面簡單易用，提供加密的雲端備份，此外還有 Google Authenticator、Microsoft Authenticator，自由軟體則有 Red Hat 開發的 FreeOTP，先前在密碼管理工具提到的 Bitwarden 的付費版也有提供 TOTP 的功能。
安裝好驗證器後，到你要登入的網站或 APP 的帳號設定中，啟動兩步驟驗證，在不同網站中，可能會以「驗證應用程式」、「谷歌驗證器」、「代碼產生器」等名稱出現，但背後都是 TOTP 這套標準，流程也很簡單，網站會將金鑰以 QR Code 的方式顯示，打開手機上的驗證器程式掃描就可以加入帳號，並輸入產生的一次性密碼供網站確認，就可以完成綁定。網站若是在手機上，則可以用「複製金鑰」的方式來手動輸入金鑰。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://www.wancat.cc/post/"},{"@type":"ListItem","position":3,"name":"用 TOTP 擺脫簡訊驗證碼：安全好用的兩步驟驗證","item":"https://www.wancat.cc/post/totp/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"用 TOTP 擺脫簡訊驗證碼：安全好用的兩步驟驗證","name":"用 TOTP 擺脫簡訊驗證碼：安全好用的兩步驟驗證","description":"兩步驟驗證 隨著數位身份在生活中的影響力愈來愈大，只靠著一組密碼來保護我們的帳戶已經不夠安全，而且記密碼實在是違反人腦天性的行為，因此大部分人總是使用重複的、好記的脆弱密碼。要解決這個問題，除了使用密碼管理工具來幫你記密碼，還可以透過設定兩步驟驗證（2FA：Two-Factor Authentication），大大提昇帳戶的安全性。\n兩步驟驗證就是在密碼之 …","keywords":["資訊安全"],"articleBody":"兩步驟驗證 隨著數位身份在生活中的影響力愈來愈大，只靠著一組密碼來保護我們的帳戶已經不夠安全，而且記密碼實在是違反人腦天性的行為，因此大部分人總是使用重複的、好記的脆弱密碼。要解決這個問題，除了使用密碼管理工具來幫你記密碼，還可以透過設定兩步驟驗證（2FA：Two-Factor Authentication），大大提昇帳戶的安全性。\n兩步驟驗證就是在密碼之外，多用一個資訊來驗證你是本人，主流的作法有像 Email、簡訊驗證信，但用過的人可能都會覺得登入時要開信箱收信很麻煩，信箱也會被這些信件給弄亂，更別提當人在國外時，簡訊收不到害你無法登入。\n今天要介紹的 TOTP: Time-based One-Time Password algorithm，就是一種公開的標準，讓你透過手機上的 APP 產生一組 6 位數的一次性驗證碼進行登入，而且在沒有網路的情況下還能使用！\nTOTP 如何運作？ TOTP 的概念，就是網站與你事先約定好一組金鑰，並以當下的時間作為參數，運算出一個雜湊值，並取最後 6 位數作為一次性密碼。\n然而如果網站和使用者的時間不同的話，就無法計算出相同的結果，因此通常會以 30 秒作為一個單位，來避免使用者與網站的時間差。網站為了良好的使用者體驗，通常也會允許前一次的一次性密碼。\nTOTP 的優點 TOTP 它是一個公開標準，你不需要依賴單一企業或組織，各種客戶端都能相容；它的安全性基於密碼學，而非第三方機構的信用；它是去中心化驗證，整個驗證流程只有要驗證身份的雙方而已。\nGoogle 可以讀你的 Gmail，簡訊也可以被政府或通訊業者攔截，然而 TOTP 不需要依賴中介機構，甚至在離線的情況下也仍然可用。\n同時對於服務提供者而言，TOTP 也很容易實做，不需要花錢去發簡訊或是寄 Email 被當成垃圾郵件，也不需要跟第三方機構申請，是個省錢又安全的好方法。\n開始使用 TOTP 儘管目前懂得使用 TOTP 的使用者並不多，但其實已經有相當多網站支持以 TOTP 作為驗證方式，例如 Google、Facebook、Apple、Amazon、GitHub、PayPal 等，我管理伺服器需要用到的 CloudFlare、Linode、Porkbun 也都有設定 TOTP 來提高安全性。\n開始使用的第一步是下載一個 TOTP 的應用程式，有非常多的選項，我自己使用的是 Authy，界面簡單易用，提供加密的雲端備份，此外還有 Google Authenticator、Microsoft Authenticator，自由軟體則有 Red Hat 開發的 FreeOTP，先前在密碼管理工具提到的 Bitwarden 的付費版也有提供 TOTP 的功能。\n安裝好驗證器後，到你要登入的網站或 APP 的帳號設定中，啟動兩步驟驗證，在不同網站中，可能會以「驗證應用程式」、「谷歌驗證器」、「代碼產生器」等名稱出現，但背後都是 TOTP 這套標準，流程也很簡單，網站會將金鑰以 QR Code 的方式顯示，打開手機上的驗證器程式掃描就可以加入帳號，並輸入產生的一次性密碼供網站確認，就可以完成綁定。網站若是在手機上，則可以用「複製金鑰」的方式來手動輸入金鑰。\n實際操作示範：Facebook 安裝 Authy 首先在 Play 商店下載安裝 Authy\n安裝完後會出現註冊頁面\n選用電話或簡訊完成認證，這裡的認證是註冊 Authy 帳號用的。\n完成後要設定一組密碼來作為加密儲存的金鑰，如果不想開啟雲端同步功能可點擊右上腳的 skip 跳過。\n設定 Facebook TOTP 打開 Facebook APP，到最右欄的設定頁面，開啟設定\n進到帳號安全中的帳號安全與登入\n點擊「使用雙重驗證」\n選擇「驗證應用程式」\n接下來 Facebook 就會顯示包含金鑰的 QR Code\n如果在電腦上的話，開啟手機上的 Authy 掃描；如果在手機上的話，則點擊「在相同裝置上設定」，就會自動導向到 Authy，如果沒有成功導向，則可以複製螢幕下方的金鑰，手動輸入 Authy 中。\n接著就可以設定應用名稱（顯示用）和 Logo\n接下來 Authy 就會產生驗證碼\n複製驗證碼填入 Facebook，就可以完成設定\n設定完成後，要在新裝置登入時，就要開啟 Authy 取得驗證碼，增加帳戶的安全性。\n如果你想要在其他的網站設定 TOTP，可以參考 Authy 提供的設定教學。\n使用 TOTP 的注意事項 首先，無論使用哪種 2FA 方式，都要記得抄寫復原碼，假如今天你的手機遺失，無法取得 TOTP 驗證碼，這時就要靠事先紀錄下的一次性復原碼來登入。每個支援 TOTP 的網站也都會在設定完成後生成多組復原碼，建議將其紀錄在密碼管理工具或是紙本筆記本上，用一本專門的筆記本紀錄復原碼是個好主意，儘管身處 21 世紀，紙本紀錄仍然是最安全的方式。\n此外，也要注意使用的驗證器是否安全，了解驗證器在儲存你的金鑰時是否有先加密，如果有雲端備份功能，也要確定在雲端是有加密的。\n參考資料   維基百科：基於時間的一次性密碼演算法\n  IThome：透過簡訊執行二次驗證不再安全，美國國家標準技術研究所建議別再使用\n  PixelPrivacy：Two-Factor Authentication - What Is It and Why You Should Use It\n  ","wordCount":"149","inLanguage":"en","datePublished":"2020-02-07T19:22:30+08:00","dateModified":"2020-02-07T19:22:30+08:00","author":{"@type":"Person","name":"wancat"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.wancat.cc/post/totp/"},"publisher":{"@type":"Organization","name":"WANcatServer","logo":{"@type":"ImageObject","url":"https://www.wancat.cc/img/favicon.ico"}}}</script></head><body id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://www.wancat.cc accesskey=h title="WANcatServer (Alt + H)"><img src=/img/logo.png alt=logo aria-label=logo height=35>WANcatServer</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu onscroll=menu_on_scroll()><li><a href=https://www.wancat.cc/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://www.wancat.cc/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://www.wancat.cc/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://www.wancat.cc/search/ title=Search><span>Search</span></a></li><li><a href=https://www.wancat.cc/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>用 TOTP 擺脫簡訊驗證碼：安全好用的兩步驟驗證</h1><div class=post-meta>February 7, 2020&nbsp;·&nbsp;1 min&nbsp;·&nbsp;wancat</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><div class=inner><ul><li><a href=#%e5%85%a9%e6%ad%a5%e9%a9%9f%e9%a9%97%e8%ad%89 aria-label=兩步驟驗證>兩步驟驗證</a></li><li><a href=#totp-%e5%a6%82%e4%bd%95%e9%81%8b%e4%bd%9c aria-label="TOTP 如何運作？">TOTP 如何運作？</a></li><li><a href=#totp-%e7%9a%84%e5%84%aa%e9%bb%9e aria-label="TOTP 的優點">TOTP 的優點</a></li><li><a href=#%e9%96%8b%e5%a7%8b%e4%bd%bf%e7%94%a8-totp aria-label="開始使用 TOTP">開始使用 TOTP</a><ul><li><a href=#%e5%af%a6%e9%9a%9b%e6%93%8d%e4%bd%9c%e7%a4%ba%e7%af%84facebook aria-label=實際操作示範：Facebook>實際操作示範：Facebook</a><ul><li><a href=#%e5%ae%89%e8%a3%9d-authy aria-label="安裝 Authy">安裝 Authy</a></li><li><a href=#%e8%a8%ad%e5%ae%9a-facebook-totp aria-label="設定 Facebook TOTP">設定 Facebook TOTP</a></li></ul></li></ul></li><li><a href=#%e4%bd%bf%e7%94%a8-totp-%e7%9a%84%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a0%85 aria-label="使用 TOTP 的注意事項">使用 TOTP 的注意事項</a></li><li><a href=#%e5%8f%83%e8%80%83%e8%b3%87%e6%96%99 aria-label=參考資料>參考資料</a></li></ul></div></details></div><div class=post-content><h2 id=兩步驟驗證>兩步驟驗證<a hidden class=anchor aria-hidden=true href=#兩步驟驗證>#</a></h2><p>隨著數位身份在生活中的影響力愈來愈大，只靠著一組密碼來保護我們的帳戶已經不夠安全，而且記密碼實在是違反人腦天性的行為，因此大部分人總是使用重複的、好記的脆弱密碼。要解決這個問題，除了<a href=/post/should-you-use-password-manager/>使用密碼管理工具</a>來幫你記密碼，還可以透過設定兩步驟驗證（2FA：Two-Factor Authentication），大大提昇帳戶的安全性。</p><p>兩步驟驗證就是在密碼之外，多用一個資訊來驗證你是本人，主流的作法有像 Email、簡訊驗證信，但用過的人可能都會覺得登入時要開信箱收信很麻煩，信箱也會被這些信件給弄亂，更別提當人在國外時，簡訊收不到害你無法登入。</p><p>今天要介紹的 TOTP: <strong>Time-based One-Time Password algorithm</strong>，就是一種公開的標準，讓你透過手機上的 APP 產生一組 6 位數的一次性驗證碼進行登入，而且在沒有網路的情況下還能使用！</p><h2 id=totp-如何運作>TOTP 如何運作？<a hidden class=anchor aria-hidden=true href=#totp-如何運作>#</a></h2><p>TOTP 的概念，就是網站與你事先約定好一組金鑰，並以當下的時間作為參數，運算出一個雜湊值，並取最後 6 位數作為一次性密碼。</p><p>然而如果網站和使用者的時間不同的話，就無法計算出相同的結果，因此通常會以 30 秒作為一個單位，來避免使用者與網站的時間差。網站為了良好的使用者體驗，通常也會允許前一次的一次性密碼。</p><h2 id=totp-的優點>TOTP 的優點<a hidden class=anchor aria-hidden=true href=#totp-的優點>#</a></h2><p>TOTP 它是一個公開標準，你不需要依賴單一企業或組織，各種客戶端都能相容；它的安全性基於密碼學，而非第三方機構的信用；它是去中心化驗證，整個驗證流程只有要驗證身份的雙方而已。</p><p>Google 可以讀你的 Gmail，簡訊也可以被政府或通訊業者攔截，然而 TOTP 不需要依賴中介機構，甚至在離線的情況下也仍然可用。</p><p>同時對於服務提供者而言，TOTP 也很容易實做，不需要花錢去發簡訊或是寄 Email 被當成垃圾郵件，也不需要跟第三方機構申請，是個省錢又安全的好方法。</p><h2 id=開始使用-totp>開始使用 TOTP<a hidden class=anchor aria-hidden=true href=#開始使用-totp>#</a></h2><p>儘管目前懂得使用 TOTP 的使用者並不多，但其實已經有相當多網站支持以 TOTP 作為驗證方式，例如 Google、Facebook、Apple、Amazon、GitHub、PayPal 等，我管理伺服器需要用到的 CloudFlare、Linode、Porkbun 也都有設定 TOTP 來提高安全性。</p><p>開始使用的第一步是下載一個 TOTP 的應用程式，有非常多的選項，我自己使用的是 <a href=https://authy.com/>Authy</a>，界面簡單易用，提供加密的雲端備份，此外還有 <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2">Google Authenticator</a>、<a href=https://support.microsoft.com/zh-tw/help/4026727/microsoft-account-how-to-use-the-microsoft-authenticator-app>Microsoft Authenticator</a>，自由軟體則有 Red Hat 開發的 <a href=https://freeotp.github.io/>FreeOTP</a>，先前在密碼管理工具提到的 <a href=https://bitwarden.com/>Bitwarden</a> 的付費版也有提供 TOTP 的功能。</p><p>安裝好驗證器後，到你要登入的網站或 APP 的帳號設定中，啟動<strong>兩步驟驗證</strong>，在不同網站中，可能會以「驗證應用程式」、「谷歌驗證器」、「代碼產生器」等名稱出現，但背後都是 TOTP 這套標準，流程也很簡單，網站會將金鑰以 QR Code 的方式顯示，打開手機上的驗證器程式掃描就可以加入帳號，並輸入產生的一次性密碼供網站確認，就可以完成綁定。網站若是在手機上，則可以用「複製金鑰」的方式來手動輸入金鑰。</p><h3 id=實際操作示範facebook>實際操作示範：Facebook<a hidden class=anchor aria-hidden=true href=#實際操作示範facebook>#</a></h3><h4 id=安裝-authy>安裝 Authy<a hidden class=anchor aria-hidden=true href=#安裝-authy>#</a></h4><p>首先在 Play 商店下載安裝 Authy</p><p><img loading=lazy src=/img/totp/authy-install.jpg alt></p><p>安裝完後會出現註冊頁面</p><p><img loading=lazy src=/img/totp/authy-sign-up.jpg alt></p><p>選用電話或簡訊完成認證，這裡的認證是註冊 Authy 帳號用的。</p><p><img loading=lazy src=/img/totp/authy-authentication.jpg alt></p><p>完成後要設定一組密碼來作為加密儲存的金鑰，如果不想開啟雲端同步功能可點擊右上腳的 skip 跳過。</p><h4 id=設定-facebook-totp>設定 Facebook TOTP<a hidden class=anchor aria-hidden=true href=#設定-facebook-totp>#</a></h4><p>打開 Facebook APP，到最右欄的設定頁面，開啟設定</p><p><img loading=lazy src=/img/totp/facebook-menu.jpg alt></p><p>進到帳號安全中的帳號安全與登入</p><p><img loading=lazy src=/img/totp/facebook-setting.jpg alt></p><p>點擊「使用雙重驗證」</p><p><img loading=lazy src=/img/totp/facebook-set-2fa.jpg alt></p><p>選擇「驗證應用程式」</p><p><img loading=lazy src=/img/totp/facebook-select-2fa-method.jpg alt></p><p>接下來 Facebook 就會顯示包含金鑰的 QR Code</p><p><img loading=lazy src=/img/totp/facebook-qrcode.jpg alt></p><p>如果在電腦上的話，開啟手機上的 Authy 掃描；如果在手機上的話，則點擊「在相同裝置上設定」，就會自動導向到 Authy，如果沒有成功導向，則可以複製螢幕下方的金鑰，手動輸入 Authy 中。</p><p><img loading=lazy src=/img/totp/authy-add-account.jpg alt></p><p>接著就可以設定應用名稱（顯示用）和 Logo</p><p><img loading=lazy src=/img/totp/authy-add-facebook.jpg alt></p><p>接下來 Authy 就會產生驗證碼</p><p><img loading=lazy src=/img/totp/authy-facebook.jpg alt></p><p>複製驗證碼填入 Facebook，就可以完成設定</p><p><img loading=lazy src=/img/totp/facebook-input-code.jpg alt></p><p><img loading=lazy src=/img/totp/facebook-succeed.jpg alt></p><p>設定完成後，要在新裝置登入時，就要開啟 Authy 取得驗證碼，增加帳戶的安全性。</p><p>如果你想要在其他的網站設定 TOTP，可以參考 Authy 提供的<a href=https://authy.com/guides/>設定教學</a>。</p><h2 id=使用-totp-的注意事項>使用 TOTP 的注意事項<a hidden class=anchor aria-hidden=true href=#使用-totp-的注意事項>#</a></h2><p>首先，無論使用哪種 2FA 方式，都要記得<strong>抄寫復原碼</strong>，假如今天你的手機遺失，無法取得 TOTP 驗證碼，這時就要靠事先紀錄下的一次性復原碼來登入。每個支援 TOTP 的網站也都會在設定完成後生成多組復原碼，建議將其紀錄在密碼管理工具或是紙本筆記本上，用一本專門的筆記本紀錄復原碼是個好主意，儘管身處 21 世紀，紙本紀錄仍然是最安全的方式。</p><p>此外，也要注意使用的驗證器是否安全，了解驗證器在儲存你的金鑰時是否有先加密，如果有雲端備份功能，也要確定在雲端是有加密的。</p><h2 id=參考資料>參考資料<a hidden class=anchor aria-hidden=true href=#參考資料>#</a></h2><ul><li><p><a href=https://zh.wikipedia.org/wiki/%E5%9F%BA%E4%BA%8E%E6%97%B6%E9%97%B4%E7%9A%84%E4%B8%80%E6%AC%A1%E6%80%A7%E5%AF%86%E7%A0%81%E7%AE%97%E6%B3%95>維基百科：基於時間的一次性密碼演算法</a></p></li><li><p><a href=https://ithome.com.tw/news/112845>IThome：透過簡訊執行二次驗證不再安全，美國國家標準技術研究所建議別再使用</a></p></li><li><p><a href=https://pixelprivacy.com/resources/two-factor-authentication/>PixelPrivacy：Two-Factor Authentication - What Is It and Why You Should Use It</a></p></li></ul></div><iframe class=LikeCoin height=235 src="https://button.like.co/in/embed/wancatserver/button?referrer=https%3a%2f%2fwww.wancat.cc%2fpost%2ftotp%2f" width=100% frameborder=0></iframe>
<a rel=license href=http://creativecommons.org/licenses/by-sa/3.0/tw/><img alt="創用 CC 授權條款" style=border-width:0 src=https://i.creativecommons.org/l/by-sa/3.0/tw/88x31.png></a>
本著作係採用<a rel=license href=http://creativecommons.org/licenses/by-sa/3.0/tw/>創用 CC 姓名標示-相同方式分享 3.0 台灣 授權條款</a>授權.<footer class=post-footer><ul class=post-tags><li><a href=https://www.wancat.cc/tags/%E8%B3%87%E8%A8%8A%E5%AE%89%E5%85%A8/>資訊安全</a></li></ul><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share 用 TOTP 擺脫簡訊驗證碼：安全好用的兩步驟驗證 on twitter" href="https://twitter.com/intent/tweet/?text=%e7%94%a8%20TOTP%20%e6%93%ba%e8%84%ab%e7%b0%a1%e8%a8%8a%e9%a9%97%e8%ad%89%e7%a2%bc%ef%bc%9a%e5%ae%89%e5%85%a8%e5%a5%bd%e7%94%a8%e7%9a%84%e5%85%a9%e6%ad%a5%e9%a9%9f%e9%a9%97%e8%ad%89&url=https%3a%2f%2fwww.wancat.cc%2fpost%2ftotp%2f&hashtags=%e8%b3%87%e8%a8%8a%e5%ae%89%e5%85%a8"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zm-253.927 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 用 TOTP 擺脫簡訊驗證碼：安全好用的兩步驟驗證 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fwww.wancat.cc%2fpost%2ftotp%2f&title=%e7%94%a8%20TOTP%20%e6%93%ba%e8%84%ab%e7%b0%a1%e8%a8%8a%e9%a9%97%e8%ad%89%e7%a2%bc%ef%bc%9a%e5%ae%89%e5%85%a8%e5%a5%bd%e7%94%a8%e7%9a%84%e5%85%a9%e6%ad%a5%e9%a9%9f%e9%a9%97%e8%ad%89&summary=%e7%94%a8%20TOTP%20%e6%93%ba%e8%84%ab%e7%b0%a1%e8%a8%8a%e9%a9%97%e8%ad%89%e7%a2%bc%ef%bc%9a%e5%ae%89%e5%85%a8%e5%a5%bd%e7%94%a8%e7%9a%84%e5%85%a9%e6%ad%a5%e9%a9%9f%e9%a9%97%e8%ad%89&source=https%3a%2f%2fwww.wancat.cc%2fpost%2ftotp%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0v-129.439c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02v-126.056c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768h75.024zm-307.552-334.556c-25.674.0-42.448 16.879-42.448 39.002.0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 用 TOTP 擺脫簡訊驗證碼：安全好用的兩步驟驗證 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwww.wancat.cc%2fpost%2ftotp%2f&title=%e7%94%a8%20TOTP%20%e6%93%ba%e8%84%ab%e7%b0%a1%e8%a8%8a%e9%a9%97%e8%ad%89%e7%a2%bc%ef%bc%9a%e5%ae%89%e5%85%a8%e5%a5%bd%e7%94%a8%e7%9a%84%e5%85%a9%e6%ad%a5%e9%a9%9f%e9%a9%97%e8%ad%89"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zm-119.474 108.193c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zm-160.386-29.702c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 用 TOTP 擺脫簡訊驗證碼：安全好用的兩步驟驗證 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.wancat.cc%2fpost%2ftotp%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978v-192.915h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 用 TOTP 擺脫簡訊驗證碼：安全好用的兩步驟驗證 on whatsapp" href="https://api.whatsapp.com/send?text=%e7%94%a8%20TOTP%20%e6%93%ba%e8%84%ab%e7%b0%a1%e8%a8%8a%e9%a9%97%e8%ad%89%e7%a2%bc%ef%bc%9a%e5%ae%89%e5%85%a8%e5%a5%bd%e7%94%a8%e7%9a%84%e5%85%a9%e6%ad%a5%e9%a9%9f%e9%a9%97%e8%ad%89%20-%20https%3a%2f%2fwww.wancat.cc%2fpost%2ftotp%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23-13.314-11.876-22.304-26.542-24.916-31.026s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 用 TOTP 擺脫簡訊驗證碼：安全好用的兩步驟驗證 on telegram" href="https://telegram.me/share/url?text=%e7%94%a8%20TOTP%20%e6%93%ba%e8%84%ab%e7%b0%a1%e8%a8%8a%e9%a9%97%e8%ad%89%e7%a2%bc%ef%bc%9a%e5%ae%89%e5%85%a8%e5%a5%bd%e7%94%a8%e7%9a%84%e5%85%a9%e6%ad%a5%e9%a9%9f%e9%a9%97%e8%ad%89&url=https%3a%2f%2fwww.wancat.cc%2fpost%2ftotp%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47A3.38 3.38.0 0126.49 29.86zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://www.wancat.cc>WANcatServer</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w=" onload=hljs.initHighlightingOnLoad();></script><script>window.onload=function(){if(localStorage.getItem("menu-scroll-position")){document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position");}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});}else{document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();}
if(id==="top"){history.replaceState(null,null," ");}else{history.pushState(null,null,`#${id}`);}});});var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft);}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script></body></html>